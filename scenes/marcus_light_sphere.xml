<scene version="3.0.0">
	<path value=".."/>

	<default name="spp" value="512"/>
	<default name="res" value="512"/>
	<default name="polarization_angle" value="0"/>
	<default name="polarizing" value="true"/>

	<!-- Integrator -->
	<integrator type="path" id="integrator">
		<integer name="max_depth" value="-1"/>
	</integrator>

	<!-- Sensor -->
	<sensor type="perspective" id="sensor">
		<transform name="to_world">
			<lookat target="0, 0, 0" origin="0, 0, 4" up="0, 1, 0"/>
		</transform>

		<sampler type="independent">
			<integer name="sample_count" value="$spp"/>
		</sampler>

		<film type="hdrfilm">
			<integer name="width" value="$res"/>
			<integer name="height" value="$res"/>
		</film>
	</sensor>

	<!-- Head Object -->
	<include filename="scenes/centered_head_marcus.xml"/>

	<!-- Light Sphere -->
	<shape type="sphere" id="light">
		<transform name="to_world">
			<scale value="10"/>
			<rotate x="1" angle="90"/>
		</transform>
		<boolean name="flip_normals" value="true"/>

		<emitter type="area">
			<rgb name="radiance" value="2"/>
		</emitter>

		<bsdf type="diffuse"/>
	</shape>

	<!-- Polarizers -->
	<shape type="sphere" id="polarizer_light">
		<transform name="to_world">
			<scale value="9"/>
			<rotate x="1" angle="90"/>
		</transform>

		<bsdf type="polarizer">
			<spectrum name="theta" value="90"/>
			<boolean name="polarizing" value="$polarizing"/>
		</bsdf>
	</shape>

	<!-- <shape type="obj" id="polarizer_cam">
		<string name="filename" value="meshes/plane.obj"/>

		<transform name="to_world">
			<lookat target="0, 0, 0" origin="0, 0, 3.5" up="0, 1, 0"/>
		</transform>

		<bsdf type="polarizer">
			<spectrum name="theta" value="0"/>
			<boolean name="polarizing" value="true"/>
		</bsdf>
	</shape> -->
	<shape type="rectangle" id="polarizer_cam">
		<transform name="to_world">
			<rotate z="1" angle="90"/>
			<lookat target="0, 0, 0" origin="0, 0, 3.5" up="0, 1, 0"/>
		</transform>

		<bsdf type="polarizer">
			<spectrum name="theta" value="$polarization_angle"/>
			<boolean name="polarizing" value="$polarizing"/>
		</bsdf>
	</shape>
</scene>