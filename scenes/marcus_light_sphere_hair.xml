<scene version="3.0.0">
	<path value=".."/>

	<default name="spp" value="512"/>
	<default name="res" value="1024"/>
	<default name="polarization_angle" value="0"/>
	<default name="polarizing" value="true"/>

	<!-- Integrator -->
	<integrator type="volpath" id="integrator">
		<integer name="max_depth" value="-1"/>
	</integrator>

	<!-- Sensor -->
	<sensor type="perspective" id="sensor">
		<transform name="to_world">
			<lookat target="0, 0, 0" origin="0, 0, 75" up="0, 1, 0"/>
		</transform>

		<sampler type="independent">
			<integer name="sample_count" value="$spp"/>
		</sampler>

		<film type="hdrfilm">
			<integer name="width" value="$res"/>
			<integer name="height" value="$res"/>
		</film>
	</sensor>

	<!-- Head Object -->
	<include filename="scenes/centered_head_marcus.xml"/>

	<!-- Hair Object -->
	<bsdf type="dielectric" id="hair_bsdf">
		<string name="int_ior" value="amber"/>
		<string name="ext_ior" value="air"/>
	</bsdf>

	<medium type="homogeneous" id="hair_medium">
		<rgb name="albedo" value="0.8"/>
		<rgb name="sigma_t" value="0.07495831115421275, 0.1019386780212289, 0.15640517144391655"/>
		<!-- <rgb name="sigma_t" value="0, 0.00087646, 0.0458497"/> -->
		
		<float name="scale" value="1"/>

		<boolean name="sample_emitters" value="false"/>
	</medium>

	<shape type="bsplinecurve" id="hair">
		<string name="filename" value="hair_models/wWavy.txt"/>

		<!-- Transform for Straight Hair -->
		<!-- <transform name="to_world">
			<scale value="0.42"/>
			<rotate x="1" angle="270"/>
			<rotate y="1" angle="180"/>
			<translate x="-1.0" y="-5.8" z="-2.2"/>
		</transform> -->

		<!-- Transform for wWavy Hair -->
		<transform name="to_world">
			<scale value="0.315"/>
			<rotate x="1" angle="270"/>
			<rotate y="1" angle="270"/>
			<translate x="-0.5" y="1.0" z="0.5"/>
		</transform>

		<!-- <bsdf type="hair"/> -->
		<ref id="hair_bsdf"/>
		<ref id="hair_medium" name="interior"/>
	</shape>

	<shape type="bsplinecurve" id="hair2">
		<string name="filename" value="hair_models/wWavy.txt"/>

		<!-- Transform for Straight Hair -->
		<!-- <transform name="to_world">
			<scale value="0.42"/>
			<rotate x="1" angle="270"/>
			<rotate y="1" angle="180"/>
			<translate x="-1.0" y="-5.8" z="-2.2"/>
		</transform> -->

		<!-- Transform for wWavy Hair -->
		<transform name="to_world">
			<scale value="0.315"/>
			<rotate x="1" angle="270"/>
			<rotate y="1" angle="270"/>
			<translate x="-0.5" y="1.0" z="0.4"/>
		</transform>

		<!-- <bsdf type="hair"/> -->
		<ref id="hair_bsdf"/>
		<ref id="hair_medium" name="interior"/>
	</shape>

	<!-- Light Sphere -->
	<shape type="sphere" id="light">
		<transform name="to_world">
			<scale value="200"/>
			<rotate x="1" angle="90"/>
		</transform>
		<boolean name="flip_normals" value="true"/>

		<emitter type="area">
			<rgb name="radiance" value="2"/>
		</emitter>

		<bsdf type="diffuse"/>
	</shape>

	<!-- Polarizers -->
	<shape type="sphere" id="polarizer_light">
		<transform name="to_world">
			<scale value="190"/>
			<rotate x="1" angle="90"/>
		</transform>

		<bsdf type="polarizer">
			<spectrum name="theta" value="90"/>
			<boolean name="polarizing" value="$polarizing"/>
		</bsdf>
	</shape>

	<shape type="rectangle" id="polarizer_cam">
		<transform name="to_world">
			<rotate z="1" angle="90"/>
			<lookat target="0, 0, 0" origin="0, 0, 70" up="0, 1, 0"/>
		</transform>

		<bsdf type="polarizer">
			<spectrum name="theta" value="$polarization_angle"/>
			<boolean name="polarizing" value="$polarizing"/>
		</bsdf>
	</shape>
</scene>